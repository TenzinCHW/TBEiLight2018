import math

Drums = {'D1':(0,0), 'D2':(684, 0), 'D3':(483, 150), 'D4':(636, 220)}

D1 = {'1':(129, 230), '2':(129, 335), '3':(133, 75), '4':(133, 145), '5':(180,15), '6':(180, 32), '7':(180, 100), '8':(180, 125), '9':(180, 190), '10':(180, 220), '11':(210, 250), '12':(210, 270), '13':(180, 275), '14':(210, 290), '15':(180, 315), '16':(210, 320), '17':(210, 355), '18':(210, 50), '19':(230, 65), '20':(230, 90), '21':(227, 110), '22':(225, 135), '23':(230, 155), '24':(220, 160), '25':(225, 182), '26':(212, 207), '27':(261, 12), '28':(261, 30), '29':(272, 42), '30':(262, 95), '31':(263, 110), '32':(263, 117), '33':(260, 135), '34':(275, 168), '35':(310, 205), '36':(262, 220), '37':(262, 235), '38':(265, 250), '39':(263, 275), '40':(308, 280), '41':(261, 295), '42':(262, 315), '43':(313, 218), '44':(313, 245), '45':(309, 345)}

D2 = {'46':(124, 255), '47':(124, 330), '48':(125, 55), '49':(124, 147), '50':(180, 220), '51':(180, 255), '52':(181, 280), '53':(178, 350), '54':(180, 5), '55':(180, 32), '56':(182, 70), '57':(180, 100), '58':(177, 128), '59':(227, 205), '60':(229, 230), '61':(235, 255), '62':(230, 270), '63':(227, 300), '64':(228, 340), '65':(230, 15), '66':(233, 50), '67':(234, 80), '68':(230, 110), '69':(230, 150), '70':(189, 170)}

D3 = {'96':(122, 30), '97':(120, 110), '98':(120, 205), '99':(120, 278), '100':(149, 22), '101':(157, 65), '102':(153, 133), '103':(151, 170), '104':(152, 190), '105':(151, 235), '106':(153, 245), '107':(155, 270), '108':(161, 297), '109':(155, 333), '110':(187, 36), '111':(187, 95), '112':(188, 127), '113':(187,163), '114':(190, 180), '115':(188, 210), '116':(225, 240), '117':(222, 258), '118':(222, 278), '119':(222, 300), '0':(178, 0)}

D4 = {'71':(258, 70), '72':(270, 45), '73':(125, 230), '74':(135, 310), '75':(195, 145), '76':(190, 185), '77':(194, 260), '78':(228, 55), '79':(248, 170), '80':(253, 195), '81':(225, 35), '82':(228, 18), '83':(143, 140), '84':(134, 290), '85':(150, 10), '86':(214, 350), '87':(203, 110), '88':(253, 100), '89':(257, 130), '90':(265, 0), '91':(213, 325), '92':(190, 215), '93':(207, 295), '94':(212, 90), '95':(155, 80)}

def polar_to_cart(rad, ang):
    '''Takes rad in cm and ang in degrees and returns x and y coords in dm'''
    x = rad/10 * math.cos(math.radians(ang))
    y = rad/10 * math.sin(math.radians(ang))
    return x, y

def build_loc_dict(current_dict, loc_in_polar, drums, drum_name):
    offset = polar_to_cart(*drums[drum_name])
    current_dict[drum_name] = int(offset[0]), int(offset[1])
    for k, v in loc_in_polar.items():
        assert(k not in current_dict.keys())
        x, y = polar_to_cart(v[0], v[1])
        x += offset[0]
        y += offset[1]
        current_dict[k] = int(x), int(y)
    return current_dict

def normalise(loc_dict):
    min_x = min(item[0] for item in loc_dict.values())
    min_y = min(item[1] for item in loc_dict.values())
    for k, v in loc_dict.items():
        loc_dict[k] = v[0] - min_x, v[1] - min_y
    return loc_dict

if __name__ == '__main__':
    current = {}
    current = build_loc_dict(current, D1, Drums, 'D1')
    current = build_loc_dict(current, D2, Drums, 'D2')
    current = build_loc_dict(current, D3, Drums, 'D3')
    current = build_loc_dict(current, D4, Drums, 'D4')
    #r, a = Drums['D2']
    #offset = polar_to_cart(r, a)
    #current = build_loc_dict(current, D2, offset)
    #r, a = Drums['D3']
    #offset = polar_to_cart(r, a)
    #current = build_loc_dict(current, D3, offset)
    #r, a = Drums['D4']
    #offset = polar_to_cart(r, a)
    #current = build_loc_dict(current, D4, offset)
    current = normalise(current)
    print(current)
